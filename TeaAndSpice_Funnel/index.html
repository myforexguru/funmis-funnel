<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tea & Spice Booking</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  
  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Optional Favicon -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2935/2935204.png" type="image/png" />
</head>
<body>

  <div class="container">
    <!-- Logo & Header -->
    <div class="logo">
      <img src="ChatGPT Image Jul 31, 2025, 08_32_08 PM.png" alt="Tea & Spice Logo" onerror="this.style.display='none'" />
      <h1>Tea & Spice Bush Bar</h1>
    </div>

    <h2 class="headline">üß° Claim Your Free Gift</h2>

    <!-- Form -->
    <form
      id="signupForm"
      action="https://script.google.com/macros/s/AKfycbxLjqxFOKM8_6b5DD0PHKi8TmPlrWEGuzIBVwG8clsN49caEaXCmfG1ASIpX7FxWq1r/exec"
      method="POST"
      target="hidden_iframe"
      onsubmit="redirectToWhatsApp(event)"
    >
      <div class="form-grid">
        <input type="text" name="name" id="nameInput" placeholder="Full Name" required />
        <input type="tel" name="phone" placeholder="WhatsApp Number" required />
        <input type="email" name="email" placeholder="Email Address" required />
        <input type="date" name="visit" id="visitInput" required />
        <button type="submit">Submit</button>
      </div>
    </form>

    <iframe name="hidden_iframe" style="display:none;"></iframe>

    <div id="thankYouMsg" class="hidden">
      ‚úÖ Submission received!<br />Redirecting to WhatsApp...
    </div>

    <!-- üéµ Audio Controls -->
    <div class="audio-controls">
      <audio 
        id="bgMusic" 
        src="Calm Down.mp3" 
        autoplay 
        muted 
        playsinline 
        loop 
        preload="auto"
      ></audio>

      <div class="audio-buttons">
        <button onclick="rewind()">‚è™</button>
        <button onclick="togglePlay()">‚ñ∂Ô∏è / ‚è∏</button>
        <button onclick="forward()">‚è©</button>
      </div>
    </div>
  </div>

  <!-- ‚úÖ SCRIPT LOGIC -->
  <script>
    const music = document.getElementById("bgMusic");

    // ‚úÖ WhatsApp redirect
    function redirectToWhatsApp(event) {
      event.preventDefault();
      const form = document.getElementById("signupForm");
      const name = document.getElementById("nameInput").value.trim();
      const visit = document.getElementById("visitInput").value.trim();

      const waNumber = "2349167631139";
      const message = `Hi Tea & Spice! My name is ${name}. I have registered for the discount and will be visiting on ${visit}.`;
      const waURL = `https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`;

      form.submit();
      document.getElementById("signupForm").style.display = "none";
      document.getElementById("thankYouMsg").classList.remove("hidden");

      setTimeout(() => {
        window.location.href = waURL;
      }, 1800);
    }

    // ‚úÖ Audio Controls
    function togglePlay() {
      if (music.paused) {
        music.play();
      } else {
        music.pause();
      }
    }

    function rewind() {
      music.currentTime = Math.max(0, music.currentTime - 10);
    }

    function forward() {
      music.currentTime = Math.min(music.duration, music.currentTime + 10);
    }

    // ‚úÖ Unlock autoplay after user taps anywhere
    function unlockAudio() {
      music.muted = false;
      music.play().catch(() => {});
      document.removeEventListener("click", unlockAudio);
      document.removeEventListener("touchstart", unlockAudio);
    }

    document.addEventListener("click", unlockAudio);
    document.addEventListener("touchstart", unlockAudio);
  </script>

</body>
</html>
